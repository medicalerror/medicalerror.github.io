{"version":3,"file":"static/webpack/static\\development\\pages\\posts\\[slug].js.bbc912b5fd65793a62b1.hot-update.js","sources":["webpack:///./pages/posts/[slug].js"],"sourcesContent":["import Head from 'next/head';\r\nimport Error from 'next/error';\r\nimport Link from 'next/link';\r\nimport Disqus from 'disqus-react';\r\nimport { documentToPlainTextString } from '@contentful/rich-text-plain-text-renderer';\r\nimport Layout from '../../components/Layout';\r\nimport ShareButtons from '../../components/ShareButtons';\r\nimport config from '../../next.config';\r\nimport client from '../../src/apis/contentfulClient';\r\nimport ContentfulRichText from '../../src/utils/contentful/ContentfulRichText';\r\nimport { trimDescription, getMediaThumbnail } from '../../src/utils';\r\n\r\nconst Post = ({ item }) => {\r\n  if (!item) return <Error statusCode={404} />;\r\n\r\n  const { sys, fields } = item;\r\n  const created = new Date(sys.createdAt).toDateString();\r\n  const updated = new Date(sys.updatedAt).toDateString();\r\n  const thumbnail = getMediaThumbnail(fields.media);\r\n\r\n  const linkHref = `/posts/${fields.slug}`;\r\n  const disqusConfig = {\r\n    url: `${config.env.PROTOCOL}://${config.env.DOMAIN}${linkHref}`,\r\n    identifier: sys.id,\r\n    title: fields.title\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <Head>\r\n        <title>{fields.title}</title>\r\n        <meta\r\n          name=\"description\"\r\n          content={trimDescription(documentToPlainTextString(fields.body))}\r\n        />\r\n      </Head>\r\n\r\n      <div className=\"post\">\r\n        <div>\r\n          <h1>\r\n            <Link href={linkHref}>\r\n              <a>{fields.title}</a>\r\n            </Link>\r\n          </h1>\r\n          <div className=\"date\">\r\n            <span>Published:</span> {created}\r\n            {created !== updated && (\r\n              <>\r\n                <span> | Updated:</span> {updated}\r\n              </>\r\n            )}\r\n          </div>\r\n          <hr />\r\n          {ContentfulRichText(fields.body)}\r\n          <hr />\r\n        </div>\r\n\r\n        <ShareButtons title={fields.title} image={thumbnail} />\r\n        <Disqus.DiscussionEmbed\r\n          shortname={config.env.DISQUS_SHORTNAME}\r\n          config={disqusConfig}\r\n        />\r\n      </div>\r\n\r\n      <style jsx global>{`\r\n        .post {\r\n          padding: 20px 20px 0;\r\n        }\r\n        h1 a {\r\n          color: #000000;\r\n        }\r\n        .date {\r\n          font-size: 13px;\r\n        }\r\n        .date > span {\r\n          opacity: 0.5;\r\n        }\r\n        img {\r\n          width: 100%;\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nPost.getInitialProps = async function(context) {\r\n  const { slug } = context.query;\r\n\r\n  const entries = await client.getEntries({\r\n    content_type: 'blogPost',\r\n    'fields.domain[in]': config.env.DOMAIN,\r\n    'fields.slug[in]': slug\r\n  });\r\n\r\n  return { item: entries.items[0] };\r\n};\r\n\r\nexport default Post;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AA9BA;AAAA;AAAA;AAuDA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAIA;AACA;AACA;AAHA;AACA;AAJA;AAGA;AAHA;AASA;AAAA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAWA;;;;A","sourceRoot":""}